---
title: computer system(一)
date: 2020-04-26 01:10:24
tags:
- Computer System
categories:
- Computer System
---

### 计算机系统漫游

#### 系统的硬件组成

##### 1. 总线

贯穿整个系统的是一组电子管道，称作总线，它携带字节并负责在各个部件间传递。通常总线被设计成传送定长的字节块（Word）

##### 2. I/O设备

I/O设备是系统与外部世界的联系通道。每个I/O设备都通过一个控制器或适配器与I/O总线相连。控制器与适配器的区别主要在于它们的封装方式。

##### 3. 主存

主存是一个临时存储设备。物理上来说，主存是由一组动态随机存取存储器芯片组成。从逻辑上来说，存储器是一个线性的字节数组，每个字节都有其唯一的地址（数组索引）

##### 4. 处理器

是解释（或执行）存储在主存中指令的引擎。处理器的核心是一个大小为一个字的存储设备（或寄存器），称为程序计数器。在任何时刻，程序计数器都指向主存中的某条机器语言指令（即含有该条指令的地址）。

#### 操作系统管理硬件

##### 1. 进程

程序看上去是独占地使用处理器、主存和I/O设备。处理器看上去就像在不间断地一条一条地执行程序中的指令，即该程序的代码和数据是系统内存中唯一的对象。这些假象是通过进程来实现的。

进程是操作系统对一个正在运行的程序的一种抽象。无论是在单核还是多核系统中，一个CPU看上去都像是在并发地执行多个进程，这是通过处理器在进程间切换来实现的。操作系统实现这种交错执行的机制称为上下文切换。

##### 2. 线程

一个进程实际上可以由多个称为线程的执行单元组成，每个线程都运行在进程的上下文中，并共享同样的代码和全局数据。多线程之间比多进程之间更容易共享数据，线程一般来说都比进程更高效。

##### 3. 虚拟内存

虚拟内存是一个抽象，它为每个进程提供了一个假象，即每个进程都在独占地使用主存。每个进程看到的内存都是一致的，称为虚拟地址空间。

每个进程看到的虚拟地址空间由大量准确定义的区构成，每个区都有专门的功能。
- 程序代码和数据

对所有进程来说，代码是从同一固定地址开始，紧接着的是和C全局变量相对应的数据位置。代码和数据区在进程一开始运行时就被指定了大小。

- 堆

代码和数据区后紧随着是运行时堆。堆可在进程运行时动态地扩展和收缩。

- 共享库

大约在地址空间的中间部分是一块用来存放像C标准库和数学库这样的共享库的代码和数据的区域。

- 栈

位于用户虚拟地址空间顶部的是用户栈，编译器用它来实现函数调用。和堆一样，可以在程序执行期间动态扩展和收缩

- 内核虚拟内存

地址空间顶部的区域是为内核保留的。不允许应用程序读写这个区域的内容或直接调用内核代码定义的函数。它们必须调用内核来执行这些操作

> 虚拟内存运作的基本思想是：把一个进程虚拟内存的内容存储在磁盘上，然后用主存作为磁盘的高速缓存。

##### 4. 文件

文件就是字节序列，仅此而已。每个I/O设备，包括磁盘、键盘、显示器，甚至是网络都可以看成是文件。它向应用程序提供了一个统一的视图，来看待系统中可能含有的所有各式各样的I/O设备。

#### 并发和并行

##### 1. 线程级并发

传统意义上，并发执行只是模拟出来的。

超线程，有时称为同时多线程，是一项允许一个CPU执行多个控制流的技术。它涉及CPU某些硬件有多个备份，比如程序计数器和寄存器文件，而其他的硬件部分只有一份。

##### 2. 指令级并行

在较低的抽象层次上，现代处理器可以同时执行多条指令的属性称为指令级并行。

##### 3. 单指令、多数据并行

在最低层次上，许多现代处理器拥有特殊的硬件，允许一条指令产生多个可以并行执行的操作，这种方式称为单指令、多数据并行。

### 程序结构和执行

#### 信息的表示和处理

无符号编码基于传统的二进制表示法，表示大于或等于零的数字。补码编码是表示有符号整数的最常见的方式。浮点数编码是表示实数的科学技术法以2为基数的版本。

浮点运算是不可结合的

##### 1. 信息的存储

大多数计算机使用字节，作为最小的可寻址的内存单位。机器级程序将内存视为一个非常大的字节数组，称为虚拟内存，所有可能地址的集合就称为虚拟地址空间。

##### 2. 字数据大小

每台计算机都有一个字长，指明指针数据的标称大小。虚拟地址是以这样的一个字来编码的，所以字长决定的最重要的系统参数就是虚拟地址空间的最大大小。

##### 3. 寻址和字节顺序

在几乎所有的机器上，多字节对象都被存储为连续的字节序列，对象的地址为所使用字节中最小的地址。

- 大端法： 最高有效字节在最前面的方式

- 小端法： 最低有效字节在最前面的方式

##### 4. C语言中的移位运算

机器支持两种形式的右移：逻辑右移和算术右移。逻辑右移在左端补0，算术右移在左端补k个最高有效位的值。

C语言标准没有明确定义对于有符号数应该使用哪种类型的右移。但是实际上几乎所有的编译器/机器组合都对有符号数使用算术右移，对于无符号数使用逻辑右移。
































